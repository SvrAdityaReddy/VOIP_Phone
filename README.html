<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
	font-size: 14px;
	padding: 0 12px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

</style>

</head>
<body>
<h1 id="voipphone">VOIP_Phone</h1>
<p>In this Project we tried to implement Voice Over Internet Protocol(VOIP) phone using TCP protocol, RTP protocol and pulse audio(used for recording sound and playback of sound).</p>
<h2 id="tools-used">Tools used</h2>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Development Langauge</td>
<td>C</td>
</tr>
<tr>
<td>TCP</td>
<td>Inbuilt API's of Linux</td>
</tr>
<tr>
<td>RTP</td>
<td>RTP lib available from sourcefourge</td>
</tr>
<tr>
<td>Audio record and playback</td>
<td>pulseaudio</td>
</tr>
</tbody>
</table>
<h2 id="installation-of-pulse-audio">Installation of pulse audio</h2>
<pre class="hljs"><code><div>
$ sudo apt-get update
$ sudo apt-get install pulseaudio
$ sudo apt-get install libpulse-dev
$ sudo apt-get install libao-dev

</div></code></pre>
<h3 id="testing-of-pulse-audio">Testing of Pulse Audio</h3>
<p>prec-simple.c, pcat-rec.c are the two example &quot;C&quot; files provided by pulse audio to record and play an pulse audio recorded signal respectively. We can compile them as follow.</p>
<pre class="hljs"><code><div>
$ gcc prec-simple.c -lpulse -lpulse-simple -o prec-simple
$ gcc pcat-simple.c -lpulse -lpulse-simple -o pcat-simple

</div></code></pre>
<p>These example files are available on pulseaudio website [1].</p>
<h2 id="methodologies">Methodologies</h2>
<p>The following is the way we had implemented VOIP phone.</p>
<p>1). First we had implemented Real Time Text Chat using TCP like whatsapp one to one chat between two people where two people can chat simultaneously. The following are the important api's used to implement Real Time Text Chat using TCP [2].</p>
<pre class="hljs"><code><div>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getaddrinfo</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *node, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *service, <span class="hljs-keyword">const</span> struct addrinfo *hints, struct addrinfo **res)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">freeaddrinfo</span><span class="hljs-params">(struct addrinfo *res)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">socket</span><span class="hljs-params">(<span class="hljs-keyword">int</span> domain, <span class="hljs-keyword">int</span> type, <span class="hljs-keyword">int</span> protocol)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">connect</span><span class="hljs-params">(<span class="hljs-keyword">int</span> sockfd, <span class="hljs-keyword">const</span> struct sockaddr *addr, <span class="hljs-keyword">socklen_t</span> addrlen)</span></span>;
<span class="hljs-keyword">ssize_t</span> recv(<span class="hljs-keyword">int</span> sockfd, <span class="hljs-keyword">void</span> *buf, <span class="hljs-keyword">size_t</span> len, <span class="hljs-keyword">int</span> flags);
<span class="hljs-keyword">ssize_t</span> send(<span class="hljs-keyword">int</span> sockfd, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> *buf, <span class="hljs-keyword">size_t</span> len, <span class="hljs-keyword">int</span> flags);

</div></code></pre>
<p>2). Next we want to build a VOIP phone. For this we had to record and play back the sound. So for this task we had used &quot;pulseaudio&quot; available for Linux. The following are the important api's used for this purpose.</p>
<pre class="hljs"><code><div>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">pa_sample_spec</span> {</span>
     <span class="hljs-keyword">pa_sample_format_t</span> format;
     <span class="hljs-keyword">uint32_t</span> rate;
     <span class="hljs-keyword">uint8_t</span> channels;
 } pa_sample_spec;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">pa_simple_read</span> <span class="hljs-params">(pa_simple * s, <span class="hljs-keyword">void</span> * data, <span class="hljs-keyword">size_t</span> bytes, <span class="hljs-keyword">int</span> * error)</span> 
<span class="hljs-keyword">int</span> <span class="hljs-title">pa_simple_write</span> <span class="hljs-params">(pa_simple * s, <span class="hljs-keyword">const</span> <span class="hljs-keyword">void</span> * data, <span class="hljs-keyword">size_t</span> bytes, <span class="hljs-keyword">int</span> * error)</span> 	
<span class="hljs-keyword">int</span> <span class="hljs-title">pa_simple_drain</span> <span class="hljs-params">(pa_simple * s, <span class="hljs-keyword">int</span> * error)</span>
pa_simple* <span class="hljs-title">pa_simple_new</span> <span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * server, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * name,     
        <span class="hljs-keyword">pa_stream_direction_t</span> dir, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * dev, <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> * stream_name,
        <span class="hljs-keyword">const</span> pa_sample_spec * ss, <span class="hljs-keyword">const</span> pa_channel_map * <span class="hljs-built_in">map</span>,
        <span class="hljs-keyword">const</span> pa_buffer_attr * attr, <span class="hljs-keyword">int</span> * error)</span> 		

</span></div></code></pre>
<p>3). Next we had integrated both pulseaudio and Real Time Text Chat and obtained VOIP phone using TCP protocol. The files we coded are named as &quot;client.c&quot;, &quot;server.c&quot;. We named it like that because one initiates the connection with the other. These files perform duplex communication.</p>
<p>4). Next we had looked at RTP library in Linux. We had found two libraries. One is &quot;oRTP&quot; from &quot;Belledonne Communications&quot; [3] and other is RTP_lib available from sourcefourge website [4].</p>
<p>5). Next we had used RTP_lib along with pulseaudio and g711 codec to implement VOIP phone. The files we coded are named as client.c, server.c. We named it like that because one initiates the connection with the other. The files we coded are named as &quot;rtp_client.c&quot;, &quot;rtp_server.c&quot;. These files when run on both sides can perform duplex communication.</p>
<h2 id="observations">Observations</h2>
<p>For very low speed of network both VOIP implementations didnot work well. But for moderate speeds TCP performed better than RTP when using RTP_lib and at higher speeds both performed well.</p>
<h2 id="future-scope">Future Scope</h2>
<p>We would like to reimplement VOIP phone instead of RTP_lib using oRTP because oRTP has the api's which would get the report statistics of the connection also jitter control and many more which could give real feel of (Session Initiation Protocol)SIP and Real Time Protocol(RTP). Also, RTP_lib is very higher level implementation. Only problem we faced in using oRTP because of installation problems and installation of it's dependencies which have to work on.</p>
<p>The code we had written is available on github at https://github.com/SvrAdityaReddy/VOIP_Phone</p>
<h2 id="references">References</h2>
<p>[1] <a href="https://freedesktop.org/software/pulseaudio/doxygen/examples.html">Pulseaudio example files</a> <br>
[2] <a href="https://moodle2.units.it/pluginfile.php/115306/mod_resource/content/1/The%20Linux%20Programming%20Interface-Michael%20Kerrisk.pdf">The Linux Programming Interface by Michael Kerrisk</a> <br>
[3] <a href="http://www.linphone.org/technical-corner/ortp/overview">oRTP RTP Library</a> <br>
[4] <a href="https://sourceforge.net/projects/rtp-lib/">RTP Library in C</a> <br></p>

</body>
</html>
